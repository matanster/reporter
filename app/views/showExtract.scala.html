@(runIDs : List[String], selectedRunID: String, article: String, matches: List[Match1])

@* result page *@

<!doctype html>
<html ng-app="showExtract">
<head>
  <!-- bootstrap includes -->
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	
  <title>@article</title>
</head>

<script type="text/javascript">

	// some bootstrap recommended ugliness to enable all popovers on page
	$(function () { $("[data-toggle='popover']").popover(); });
	
	// some ugliness to dismiss popovers upon click, via event fiddling 
	$('html').on('click', function(e) {
		  if (typeof $(e.target).data('original-title') == 'undefined') {
		    $('[data-original-title]').popover('hide');
		  }
		});
		
</script>

<body>

  <div>
  
    <span>You are viewing the output for run ID:</span>
    
    <!-- runID display and selection -->    	   
    <span data-toggle="popover" 
          data-trigger="hover" 
          data-placement="auto" data-html="true" 
          data-content="you may also select a different run's results here, by clicking here and selecting a different run ID">

		  <span class="dropdown">   	
		  <button type="button" 
		          class="btn btn-default dropdown-toggle" 
		          data-toggle="dropdown"
		          >
		          @selectedRunID 
		          <span class="caret"></span>
		  </button>
	    <ul class="dropdown-menu" 
	        role="menu">
	        @runIDs.map {r => 
	        <li><a role="presentation" 
	               role="menuitem" tabindex="-1" 
	               href=@routes.Application.showExtract(r, article)>@r</a></li>
	      }
		  </ul>
		  </span>
	  </span>

    <!-- button for showing original article -->
    @buttonWithPopover("View Original", routes.Application.showOriginal(article).toString, "click here to go to the original article")
	 	 
  </div>
  
  <!-- output table -->
  <table class="table">
    @matches.map {m => 
      <tr>
        <td class="matchIndication">@m.matchIndication</td>
        <td style="width: 80ch" 
            data-toggle="popover" 
            data-trigger="hover" 
            data-placement="auto" 
            title="why is this here?" 
            data-html="true" 
            data-content="it matched pattern: <b>@m.matchPattern</b><br>in section: <b>@m.locationActual</b>">
            @m.sentence
        </td>
      </tr>
    }
  </table>
	  
</body>